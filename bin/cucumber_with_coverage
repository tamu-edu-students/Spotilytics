#!/usr/bin/env ruby

# Set Rails environment
ENV['RAILS_ENV'] ||= 'test'

# Enable coverage unless explicitly disabled
ENV['COVERAGE'] ||= 'true'

puts "ğŸ¥’ Running Cucumber features with coverage..."
puts "   Environment: #{ENV['RAILS_ENV']}"
puts "   Coverage: #{ENV['COVERAGE'] == 'true' ? 'enabled' : 'disabled'}"
puts "   " + "-" * 50

system("bundle", "exec", "cucumber", *ARGV)

if $?.success?
  puts "\nâœ… Cucumber features completed!"
  puts "ğŸ“Š Coverage report: coverage/index.html"
  puts "ğŸ” VS Code coverage: coverage/lcov/CSCE606-Group4-Project1.lcov"
else
  puts "\nâŒ Some Cucumber features failed!"
  puts "ğŸ’¡ Check the output above for details"
end